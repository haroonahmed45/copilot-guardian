{"type": "dir2md.meta", "schema": "dir2md.rag.v1", "generator": {"name": "dir2md", "version": "2.0.0"}, "root": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\Project\\GITHUB COPLIOT CLI CHALLENGE\\copilot-guardian\\src\\engine", "preset": "pro", "llm_mode": "summary", "output_format": "jsonl", "meta_blueprint": {"status": "reference", "purpose": "rag_indexing_profile", "note": "Reference profile only; dir2md does not execute these modules.", "source": {"project": "Flamehaven-Filesearch", "version": "v1.4", "blueprint": "Flamehaven-Filesearch_blueprint_pro_v1.4", "module": "flamehaven_filesearch"}, "components": {"intent_refiner": {"typo_corrections": true, "keyword_extraction": true, "extension_detection": true, "metadata_filters": ["size", "after", "before", "type"], "known_extensions": ["py", "txt", "pdf", "docx", "doc", "xlsx", "xls", "json", "yaml", "yml", "md", "html", "css", "js", "ts", "java", "cpp", "c", "h", "sh", "bat", "sql", "xml", "csv"]}, "embedding": {"name": "Gravitas Vectorizer", "algorithm": "DSP-v2.0", "vector_dim": 384, "max_text_length": 512, "char_ngram_range": [3, 5], "use_word_tokens": true, "word_weight": 2.0, "char_weight": 1.0, "hash": "sha256", "normalize": "l2", "cache_size": 1024, "backend": "numpy_optional", "multimodal": {"image_bytes_vector": true, "combine": "weighted_sum_l2", "weights": {"text": "configurable", "image": "configurable"}}}, "gravitas_pack": {"kind": "glyph_compression", "target_reduction_pct": "70-90", "path_glyphs": {"D:\\\\Sanctum\\\\": "[S]", "D:\\\\": "[D]", "C:\\\\": "[C]", "/home/": "[H]", "/root/": "[R]", "/var/": "[V]"}, "ext_glyphs": {".py": "[*py]", ".pdf": "[*pdf]", ".docx": "[*dx]", ".xlsx": "[*xls]", ".json": "[*json]", ".yaml": "[*yaml]", ".txt": "[*txt]", ".md": "[*md]", ".html": "[*html]", ".css": "[*css]", ".js": "[*js]", ".ts": "[*ts]", ".sql": "[*sql]", ".xml": "[*xml]", ".sh": "[*sh]", ".bat": "[*bat]"}, "field_glyphs": {"created_at": "C", "modified_at": "M", "accessed_at": "A", "size_bytes": "S", "file_name": "F", "file_path": "P", "file_type": "T", "content_hash": "H", "is_binary": "B", "encoding": "E", "lines_of_code": "L", "tags": "G", "description": "D", "checksum": "X", "mime_type": "I", "permissions": "O"}, "status_glyphs": {"indexed": "1", "pending": "0", "error": "-", "true": "Y", "false": "N"}}, "chronos_grid": {"layers": ["spark_buffer", "echo_screen", "time_shards"], "vector_essence": true, "vector_dim": 384, "quantization": {"enabled": true, "dtype": "int8", "memory_reduction_pct": 75}, "index_backend": ["brute", "hnsw"], "hnsw_params": {"m": 16, "ef_construction": 200, "ef_search": 50}, "stats_fields": ["total_resonance_seeks", "spark_buffer_hits", "time_shard_hits", "echo_screen_rejections", "false_positive_echoes", "time_shards_scanned", "time_shards_skipped", "vector_essence_seeks"]}, "quantizer": {"algorithm": "asymmetric_int8", "vector_dim": 384, "bytes_per_vector": 392, "metadata": ["min", "scale"], "precision_loss_pct": "<0.1"}, "vector_store": {"backends": ["memory", "postgres"], "postgres": {"extension": "pgvector", "table_default": "flamehaven_vectors"}, "pgvector_index": {"kind": "hnsw", "ops": "vector_cosine_ops"}, "circuit_breaker": {"failure_threshold": 5, "recovery_timeout_sec": 60.0, "success_threshold": 2}, "retry_backoff": {"max_retries": 3, "initial_delay_sec": 0.1, "max_delay_sec": 2.0, "backoff_factor": 2.0}, "health_check": {"connection_test": "SELECT 1", "fields": ["healthy", "circuit_state", "failure_count", "last_failure_time"]}, "maintenance": ["reindex_hnsw", "vacuum_analyze"]}}}, "rag": {"enabled": true, "store": "dir2md", "chunk_chars": 1400, "chunk_overlap": 120}, "budget": {"total_tokens": 9000, "max_file_tokens": 1500}, "sampling": {"max_bytes": 200000, "max_lines": 2000, "sample_head": 160, "sample_tail": 60}, "selection": {"include_globs": [], "exclude_globs": [".git", "__pycache__", "node_modules", ".venv", "venv", "venv_clean", ".pytest_cache", ".ruff_cache", ".mypy_cache", "build", "dist", "*.egg-info", "htmlcov", ".coverage", "coverage.xml", "*.pyc", ".DS_Store", ".env", ".env.*", "*.env", "*.pem", "*.key", "*.p12", "*.pfx", "*.cer", "*.crt", "*.log", "*.lock", "package-lock.json", "yarn.lock", "poetry.lock", "Cargo.lock"], "omit_globs": [], "only_ext": null, "respect_gitignore": false, "follow_symlinks": false}, "dedup": {"simhash_bits": 16}, "masking": {"mode": "basic", "custom_patterns": 0}, "query": {"text": ""}, "stats": {"total_dirs": 1, "total_files_in_tree": 10, "total_omitted": 0, "total_with_contents": 10, "est_tokens_prompt": 2719}, "generated_at_ms": 1769760379173, "spicy": {"score": 0, "counts": {"ok": 1, "warn": 0, "risk": 0, "high": 0, "critical": 0}}}
{"type": "dir2md.meta_block", "schema": "dir2md.meta_frontier.v1", "generator": {"name": "dir2md", "version": "2.0.0"}, "root": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\Project\\GITHUB COPLIOT CLI CHALLENGE\\copilot-guardian\\src\\engine", "preset": "pro", "llm_mode": "summary", "spec": {"version": "v1", "sections": ["context", "inference", "meta"]}, "context": {"project": "engine", "root": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\Project\\GITHUB COPLIOT CLI CHALLENGE\\copilot-guardian\\src\\engine", "preset": "pro", "llm_mode": "summary", "query": "", "stats": {"total_dirs": 1, "total_files_in_tree": 10, "total_omitted": 0, "total_with_contents": 10, "est_tokens_prompt": 2719, "coverage_ratio": 1.0}, "extensions": [[".ts", 10]], "top_levels": ["analyze.ts", "async-exec.ts", "auto-apply.ts", "context-enhancer.ts", "debug.ts", "github.ts", "mcp.ts", "patch_options.ts", "run.ts", "util.ts"], "top_paths": ["analyze.ts", "async-exec.ts", "auto-apply.ts", "context-enhancer.ts", "debug.ts", "github.ts", "mcp.ts", "patch_options.ts", "run.ts", "util.ts"], "top_summaries": [{"path": "analyze.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - import { fetchRunContex..."}, {"path": "async-exec.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Medium` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import { spawn } from 'child_process'; - import ora, { Ora } from 'ora'; - import..."}, {"path": "auto-apply.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * auto-apply.ts - * Self-Healing Engine: Applies patches automatically and val..."}, {"path": "context-enhancer.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * context-enhancer.ts - * Deep Intelligence: Extract source files mentioned in..."}, {"path": "debug.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import { execSync } from \"node:child_process\"; - imp..."}, {"path": "github.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import chalk from \"chalk\"; - import { ghAsync } from \"./async-exec\"; - import { reda..."}, {"path": "mcp.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import fs from 'fs'; - import path from 'path'; - import os from 'os'; - import chal..."}, {"path": "patch_options.ts", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - import { copilotChatAsy..."}], "nav": {"files_with_nav": 10, "role_counts": [["Kernel/Core", 10]], "entry_point_counts": [], "critical_flow_counts": []}, "spicy": {"score": 0, "counts": {"ok": 1, "warn": 0, "risk": 0, "high": 0, "critical": 0}}}, "inference": {"logos": {"status": "ok", "path": "success", "success": true, "elapsed_ms": 4376, "scores": {"omega": 0.843524774467975, "unified_psi_q": 0.843524774467975, "certification_grade": "A"}, "irf": {"continuous": 0.7580339039264877, "integer": 76, "passed": false}, "aats": {"psi_resonance": 1.0, "fitness": 1.2, "passed": true}, "validation": {"semantic_consistency": 0.8093272336858427, "drift": {"jsd": 0.039782814255812315, "l2": 0.03782410243676302, "level": "normal", "should_halt": false}, "calibration": {"correlation": 0.0, "passed": false, "recalibration_needed": true}}, "final_theory": "", "trace": ["[LOGOS] Starting reasoning for query: Analyze repo engine blueprint for frontier upgrades....", "[Phase 1] Parallel IRF + AATS reasoning", "[HRPO-X] Policy reasoning executed", "[Phase 2] Drift detection", "[Phase 3] Cross-validation and consensus", "[CONFLICT] {'score_diff': 0.24196609607351227, 'irf_score': 0.7580339039264877, 'aats_score': 1.0, 'threshold': 0.15, 'embedding_similarity': 0.8093272336858427, 'embedding_similarity_min': 0.85, '...", "[Phase 4] Calibration check", "[RECALIBRATE] Score out of expected range"], "config": {"status": "default", "path": null, "error": null}, "module": {"path": "D:\\Sanctum\\Flamehaven-LOGOS", "version": "1.4.5"}}, "hrpo": {"status": "ok", "elapsed_ms": 0, "observed_hidden_ratio": 0.0, "target_hidden_ratio": 0.15, "r_min": 0.9838349999999999, "r_min_per_task": {"knowledge": 0.98, "stem": 0.95, "general": 0.9838349999999999}, "converged": false, "module": {"path": "D:\\Sanctum\\HRPO-X", "version": "1.1.0"}}, "leda_lite_plus": {"status": "lite_plus", "engine": "leda_lite_plus", "decision": "pass", "priority": "expand", "score": 0.8567, "confidence": 0.9355, "signals": {"coverage_ratio": 1.0, "spicy_score": 0.0, "drift_level": "normal", "drift_jsd": 0.039782814255812315, "drift_l2": 0.03782410243676302, "omega": 0.843524774467975, "semantic_consistency": 0.8093272336858427, "irf_continuous": 0.7580339039264877, "aats_fitness": 1.2, "r_min": 0.9838349999999999, "pre_focus_avg_score": 0.0925, "pre_focus_count": 8, "total_files_in_tree": 10, "total_with_contents": 10, "query_present": false}, "actions": ["add_query_focus", "prioritize_pre_targets", "align_irf_aats"]}, "tensor_addon": {"status": "ok", "engine": "tensor_canon", "resonance_gap": 4.345826148986816, "stable": false, "vector": {"features": ["coverage_ratio", "omega", "semantic_consistency", "irf_continuous", "drift_jsd", "drift_l2", "aats_fitness", "r_min", "pre_focus_avg", "spicy_score", "budget_utilization"], "baseline": [0.5, 0.85, 0.8, 0.9, 0.05, 0.05, 1.0, 0.95, 0.4, 0.0, 0.9], "current": [1.0, 0.843524774467975, 0.8093272336858427, 0.7580339039264877, 0.039782814255812315, 0.03782410243676302, 1.0, 0.9838349999999999, 0.0925, 0.0, 0.3021111111111111]}, "module": {"path": "D:\\Sanctum\\Flamehaven-Tensor-Canon-OMEGA"}}}, "meta": {"frontier": {"readiness": "medium", "priority": "stabilize", "efficiency_gate": "strict", "scores": {"frontier_score": 0.7645, "confidence": 1.0}, "signals": {"omega": 0.843524774467975, "semantic_consistency": 0.8093272336858427, "irf_continuous": 0.7580339039264877, "drift_level": "normal", "drift_jsd": 0.039782814255812315, "drift_l2": 0.03782410243676302, "calibration_passed": false, "coverage_ratio": 1.0, "r_min": 0.9838349999999999}, "actions": ["increase semantic consistency by widening coverage or refining query"]}, "pre_focus": {"engine": "pre_focus_v2", "count": 8, "avg_score": 0.0925, "max_score": 0.18, "targets": [{"path": "async-exec.ts", "score": 0.18, "reasons": ["content:high_keywords", "structure:class/def"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Medium` > * **Intent:** \"Component implementation for system logic.\" > * **Constrain..."}, {"path": "patch_options.ts", "score": 0.14, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "run.ts", "score": 0.12, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "analyze.ts", "score": 0.06, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "auto-apply.ts", "score": 0.06, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "context-enhancer.ts", "score": 0.06, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "debug.ts", "score": 0.06, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}, {"path": "github.ts", "score": 0.06, "reasons": ["content:high_keywords"], "excerpt": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:..."}]}}, "generated_at_ms": 1769760383843}
{"type": "dir2md.asdp_contract", "schema": "asdp.compact.v1", "generator": {"name": "dir2md", "version": "2.0.0"}, "capability_floor": ["gpt5", "gemini3"], "intent": "Analyze repo engine and plan safe changes.", "domain": "software", "learning": {"status": "lite_plus", "engine": "leda_lite_plus", "decision": "pass", "priority": "expand", "score": 0.8567, "confidence": 0.9355, "signals": {"coverage_ratio": 1.0, "spicy_score": 0.0, "drift_level": "normal", "drift_jsd": 0.039782814255812315, "drift_l2": 0.03782410243676302, "omega": 0.843524774467975, "semantic_consistency": 0.8093272336858427, "irf_continuous": 0.7580339039264877, "aats_fitness": 1.2, "r_min": 0.9838349999999999, "pre_focus_avg_score": 0.0925, "pre_focus_count": 8, "total_files_in_tree": 10, "total_with_contents": 10, "query_present": false}, "actions": ["add_query_focus", "prioritize_pre_targets", "align_irf_aats"]}, "pre_focus": {"engine": "pre_focus_v2", "count": 8, "avg_score": 0.0925, "max_score": 0.18, "targets": [{"path": "async-exec.ts", "score": 0.18, "reasons": ["content:high_keywords", "structure:class/def"]}, {"path": "patch_options.ts", "score": 0.14, "reasons": ["content:high_keywords"]}, {"path": "run.ts", "score": 0.12, "reasons": ["content:high_keywords"]}, {"path": "analyze.ts", "score": 0.06, "reasons": ["content:high_keywords"]}, {"path": "auto-apply.ts", "score": 0.06, "reasons": ["content:high_keywords"]}]}, "frontier_summary": {"readiness": "medium", "priority": "stabilize", "efficiency_gate": "strict", "scores": {"frontier_score": 0.7645, "confidence": 1.0}, "signals": {"omega": 0.843524774467975, "semantic_consistency": 0.8093272336858427, "drift_level": "normal", "coverage_ratio": 1.0, "r_min": 0.9838349999999999}, "actions": ["increase semantic consistency by widening coverage or refining query"]}, "identity": {"name": "repo_engineer", "mission": "Deliver minimal, safe changes aligned with policies.", "principles": ["no_secrets", "test_first", "no_breaking_changes", "minimal_diff", "traceable", "abstain_if_uncertain"]}, "governance": {"principles": ["no_secrets", "test_first", "no_breaking_changes", "minimal_diff", "traceable", "abstain_if_uncertain"], "required_tags": ["governance", "audit"], "abstain_if": ["policy_conflict", "legal_conflict", "low_confidence", "insufficient_evidence"], "conflict_strategy": "stop"}, "lawbinder": {"enforce_contract": true, "strict_mode": true, "required_principles": ["traceable", "policy_first"], "required_tags": ["governance", "audit"], "prohibited_actions": ["transfer", "grant_access", "revoke_access"], "required_disclaimers": ["not_legal_advice"], "jurisdiction": ["global"], "legal_constraints": ["no_legal_advice", "no_personal_data", "no_security_bypass"], "policy_versions": [], "risk_policy": {"low": ["read", "search", "summarize", "analyze", "recommend"], "medium": ["draft", "suggest"], "high": ["execute", "send", "publish", "delete", "update"], "critical": ["approve", "transfer", "grant_access", "revoke_access"], "domain_overrides": {"medical": ["recommend", "suggest"], "finance": ["analyze", "recommend"], "legal": ["draft", "suggest"]}}, "response_contract_fields": ["status", "answer", "allowed_actions", "blocked_actions", "validation_eta_ms", "audit_hash"], "validation_required_for": ["high", "critical"]}, "templates": {"plan": "{steps}", "patch": "{diff}", "verify": "{tests}"}, "validation": {"requirements": ["tests_pass", "policy_ok", "diff_minimal"], "uncertainty_max": 0.1, "stop_on_conflict": true}, "execution": {"engine": "llm", "mode": "simulate", "inference_source": "asdp_lite", "compact_level": "strict"}, "context": {"root": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\Project\\GITHUB COPLIOT CLI CHALLENGE\\copilot-guardian\\src\\engine", "top_paths": ["analyze.ts", "async-exec.ts", "auto-apply.ts", "context-enhancer.ts", "debug.ts", "github.ts", "mcp.ts", "patch_options.ts", "run.ts", "util.ts"], "coverage_ratio": 1.0, "stats": {"total_dirs": 1, "total_files_in_tree": 10, "total_omitted": 0, "total_with_contents": 10, "est_tokens_prompt": 2719}}, "spicy": {"score": 0, "counts": {"ok": 1, "warn": 0, "risk": 0, "high": 0, "critical": 0}}, "sources": [{"path": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\AI TOOL\\3. 설계 모달\\AI Sovereign Definition Protocol (ASDP) + SCL DI Claudeflare\\ASDP v2 0 Complete Edition.md", "sha256": "1665cd39dd7f22415583bc732d6eb6bf0511cb75bd85f2e8b6ebf99984129965", "parsed": true, "fields": ["apiVersion", "kind", "metadata", "spec"], "version": "2.0"}, {"path": "D:\\Sanctum\\Flamehaven\\STRUCTURA\\AI TOOL\\3. 설계 모달\\AI Sovereign Definition Protocol (ASDP) + SCL DI Claudeflare\\ASDP v2 8 4 2 Full-Stack Blueprint — Enterprise Pr bcdf4f484ea54f53aa1f27740d9cdb95.md", "sha256": "929fabc4efab5c1b314fca7884bfe6630efeb81a3e757a81555bb998dfbba270", "parsed": true, "fields": ["data", "deployment", "llm_providers", "observability", "runtime", "security"], "version": "2.8.4.2"}], "transform": {"notes": ["source[0] parsed -> compact overrides applied", "source[1] parsed -> compact overrides applied"]}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "e0352f8d", "path": "analyze.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Canalyze.ts", "mode": "summary", "lang": "markdown", "sha256": "f6034bd02f613d942d049c8a4a67048eb994c384041a1835f2b9ca0d0f9298a9", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "b0746254cad1995149ef929dc304a37a22c46b46918246caa8cf934b4369f1be", "anchor_id": "1fe51ec9", "atom_kind": "chunk", "path": "analyze.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Canalyze.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Canalyze.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1141], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import path from \"node:path\";\n- import chalk from \"chalk\";\n- import { fetchRunContext, RunContext } from \"./github\";\n- import { copilotChatAsync } from \"./async-exec\";\n- import { ensureMCPConfigured, enhancePromptWithMCP, saveMCPUsageLog } from \"./mcp\";\n- import { enhanceContextWithSources, formatSourceContextForPrompt } from \"./context-enhancer\";\n- import {\n-   ensureDir,\n-   loadText,\n-   writeJson,\n-   writeText,\n-   extractJsonObject,\n-   validateJson\n- } from \"./util\";\n- export interface Hypothesis {\n-   id: string;\n-   title: string;\n-   category: string;\n-   confidence: number;\n-   evidence: string[];\n-   disconfirming: string[];\n-   next_check: string;\n- }\n- export type AnalysisJson = {\n-   metadata: {\n-     repo: string;\n-     run_id: number;\n-     workflow_path?: string;\n-     redacted: boolean;\n-   };\n-   failure_context: {\n-     job: string;\n-     step: string;\n-     exit_code: number;\n-     log_summary: string;\n-   };\n-   diagnosis: {", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "e0352f8d"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "c31e06e2", "path": "async-exec.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Casync-exec.ts", "mode": "summary", "lang": "markdown", "sha256": "df71f81298b1a8574e519e63576bb1224b1a5920d8ed4ca38c98740902034afe", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Medium` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import { spawn } from 'child_process'; - import ora, { Ora } ...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "a206cd39ecb2f9cf98a5c637138388ed32a261df1e181abb76ee1e2da4aedf3e", "anchor_id": "9f7da1b6", "atom_kind": "chunk", "path": "async-exec.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Casync-exec.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Casync-exec.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1110], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Medium` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import { spawn } from 'child_process'; - import ora, { Ora } ...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Medium`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import { spawn } from 'child_process';\n- import ora, { Ora } from 'ora';\n- import chalk from 'chalk';\n- export interface ExecOptions {\n-   showSpinner?: boolean;\n-   spinnerText?: string;\n-   timeout?: number;\n-   retries?: number;\n- }\n- export class TimeoutError extends Error {\n-   constructor(ms: number) {\n-     super(`Operation timed out after ${ms}ms`);\n-     this.name = 'TimeoutError';\n-   }\n- }\n- export class RateLimitError extends Error {\n-   constructor() {\n-     super('GitHub API rate limit exceeded');\n-     this.name = 'RateLimitError';\n-   }\n- }\n- export class CopilotError extends Error {\n-   constructor(message: string) {\n-     super(`Copilot CLI error: ${message}`);\n-     this.name = 'CopilotError';\n-   }\n- }\n- /**\n-  * Execute command asynchronously with optional spinner\n-  */\n- export async function execAsync(\n-   command: string,\n-   args: string[],\n-   input?: string,\n-   options: ExecOptions = {}", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "c31e06e2"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "7b473a41", "path": "auto-apply.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cauto-apply.ts", "mode": "summary", "lang": "markdown", "sha256": "e1335019038f03ccf5a1cc637bd80a2ba7fecf38472d37a842cde30738f8901c", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * auto-apply.ts - * Self-Healing Engine: Applies patches a...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "5ea1578533e68de7d2f5db4669ab9b38cfbd7b524149185aeae869a03454b77f", "anchor_id": "327835cd", "atom_kind": "chunk", "path": "auto-apply.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cauto-apply.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cauto-apply.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1301], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * auto-apply.ts - * Self-Healing Engine: Applies patches a...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- /**\n-  * auto-apply.ts\n-  * Self-Healing Engine: Applies patches automatically and validates CI\n-  */\n- import { execAsync } from './async-exec';\n- import { writeFile, readFile } from 'fs/promises';\n- import { resolve } from 'path';\n- import chalk from 'chalk';\n- export interface ApplyResult {\n-   success: boolean;\n-   filesModified: string[];\n-   commitSha?: string;\n-   ciStatus?: 'passed' | 'failed' | 'pending';\n-   error?: string;\n- }\n- /**\n-  * Apply a patch to local files\n-  */\n- export async function applyPatch(\n-   patch: { file: string; content: string }[],\n-   options: { dryRun?: boolean; autoCommit?: boolean } = {}\n- ): Promise<ApplyResult> {\n-   const filesModified: string[] = [];\n-   try {\n-     // Apply file changes\n-     for (const { file, content } of patch) {\n-       const filePath = resolve(process.cwd(), file);\n-       if (options.dryRun) {\n-         console.log(chalk.gray(`[DRY RUN] Would modify: ${file}`));\n-         continue;\n-       }\n-       await writeFile(filePath, content, 'utf-8');\n-       filesModified.push(file);\n-       console.log(chalk.green(`[+] Applied patch: ${file}`));", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "7b473a41"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "2474278b", "path": "context-enhancer.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Ccontext-enhancer.ts", "mode": "summary", "lang": "markdown", "sha256": "75d39b400cee5cf66e7f03387451d8ac517bae02d0313318284540b1cbc4fe9f", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * context-enhancer.ts - * Deep Intelligence: Extract sourc...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "20ef5fe09419b82d40916833579197fad7361884b8ab1e3ee739f850abd05ec5", "anchor_id": "872941a4", "atom_kind": "chunk", "path": "context-enhancer.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Ccontext-enhancer.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Ccontext-enhancer.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1356], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - /** - * context-enhancer.ts - * Deep Intelligence: Extract sourc...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- /**\n-  * context-enhancer.ts\n-  * Deep Intelligence: Extract source files mentioned in errors for pinpoint diagnosis\n-  */\n- import { ghAsync } from './async-exec';\n- import chalk from 'chalk';\n- export interface SourceContext {\n-   file: string;\n-   content: string;\n-   lineStart?: number;\n-   lineEnd?: number;\n- }\n- /**\n-  * Extract file paths from error logs\n-  * Matches patterns like: \"src/utils.ts:45\", \"./components/Button.tsx:12:5\"\n-  */\n- function extractFilePaths(logExcerpt: string): Array<{ file: string; line?: number }> {\n-   const fileRegex = /(?:\\.\\/|src\\/|tests?\\/)?[\\w\\-./]+\\.\\w{2,4}(?::\\d+)?/g;\n-   const matches = logExcerpt.match(fileRegex) || [];\n-   return matches\n-     .map(match => {\n-       const [file, line] = match.split(':');\n-       return { file, line: line ? parseInt(line, 10) : undefined };\n-     })\n-     .filter((v, i, a) => a.findIndex(t => t.file === v.file) === i) // Unique files only\n-     .slice(0, 5); // Limit to top 5 files\n- }\n- /**\n-  * Fetch source file content from GitHub at specific commit\n-  */\n- async function fetchSourceFile(\n-   repo: string,\n-   filePath: string,\n-   commitSha: string\n- ): Promise<string | null> {", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "2474278b"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "2cc66df5", "path": "debug.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cdebug.ts", "mode": "summary", "lang": "markdown", "sha256": "6d034b893306e022b0710c1b6786b8f6de0dd3afe626152a544a8190a5451b21", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import { execSync } from \"node:c...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "2fb258789ada9b32d532d453eb1ea1f36dd1ac29086a20b086ab5417c958cc81", "anchor_id": "5a63edce", "atom_kind": "chunk", "path": "debug.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cdebug.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cdebug.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 2, "span": [0, 1400], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import { execSync } from \"node:c...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import path from \"node:path\";\n- import { execSync } from \"node:child_process\";\n- import readline from \"node:readline/promises\";\n- import { stdin as input, stdout as output } from \"node:process\";\n- import { analyzeRun } from \"./analyze\";\n- import { generatePatchOptions } from \"./patch_options\";\n- import { ensureDir, loadText, writeText, extractJsonObject, validateJson } from \"./util\";\n- function copilotChat(payload: string): string {\n-   try {\n-     return execSync(\"gh copilot chat --quiet\", {\n-       input: payload,\n-       stdio: [\"pipe\", \"pipe\", \"pipe\"],\n-       encoding: \"utf8\"\n-     }) as unknown as string;\n-   } catch (e: any) {\n-     const stderr = e?.stderr ? String(e.stderr) : \"\";\n-     throw new Error(`Copilot CLI failed.\\n${stderr}`);\n-   }\n- }\n- export async function debugInteractive(repo: string, runId: number, outDir = path.join(process.cwd(), \".copilot-guardian\")) {\n-   ensureDir(outDir);\n-   const { analysis, ctx } = await analyzeRun(repo, runId, outDir);\n-   const rl = readline.createInterface({ input, output });\n-   const transcriptPath = path.join(outDir, \"debug.transcript.md\");\n-   writeText(transcriptPath, `# copilot-guardian debug transcript\\n\\nRepo: ${repo}\\nRun: ${runId}\\n\\n`);\n", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "2cc66df5"}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "901d7830b24e801613d5be4247bcffe7e3027a6c74fd31727547f89405be5d6b", "anchor_id": "bfbe741f", "atom_kind": "chunk", "path": "debug.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cdebug.ts#c0002", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cdebug.ts", "mode": "summary", "lang": "markdown", "chunk_index": 2, "chunk_total": 2, "span": [1225, 1811], "summary": "- const transcriptPath = path.join(outDir, \"debug.transcript.md\"); - writeText(transcriptPath, `# copilot-guardian debug transcript\\n\\nRepo: ${repo}\\nRun: ${runId}\\n\\n`); - // Thin interactive layer: ask follow-ups, then optionally gener...", "content": "-   const transcriptPath = path.join(outDir, \"debug.transcript.md\");\n-   writeText(transcriptPath, `# copilot-guardian debug transcript\\n\\nRepo: ${repo}\\nRun: ${runId}\\n\\n`);\n-   // Thin interactive layer: ask follow-ups, then optionally generate patch spectrum.\n-   while (true) {\n-     output.write(\"\\nChoose an action:\\n\");\n-     output.write(\"  1) Ask Copilot a follow-up question\\n\");\n-     output.write(\"  2) Generate patch options (Conservative/Balanced/Aggressive)\\n\");\n-     output.write(\"  3) Exit\\n\\n\");\n-     const choice = (await rl.question(\"Your choice (1-3): \")).trim();", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "2cc66df5"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "ef7f174e", "path": "github.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cgithub.ts", "mode": "summary", "lang": "markdown", "sha256": "7b169300b16d38463371aecc2aa6ae746b309522cb08305ebe0857e6b91c0896", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import chalk from \"chalk\"; - import { ghAsync } from \"./async-ex...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "efecc0bad906f5334f9ae9fd839a8c6eb3ec269073b70a836c0fd1b7efc51668", "anchor_id": "7eeab816", "atom_kind": "chunk", "path": "github.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cgithub.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cgithub.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1117], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import chalk from \"chalk\"; - import { ghAsync } from \"./async-ex...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import chalk from \"chalk\";\n- import { ghAsync } from \"./async-exec\";\n- import { redactSecrets, clampText } from \"./util\";\n- export type RunContext = {\n-   repo: string;\n-   runId: number;\n-   workflowPath?: string;\n-   headSha?: string;\n-   job?: string;\n-   step?: string;\n-   exitCode?: number;\n-   logExcerpt: string;\n-   logSummary: string;\n-   workflowYaml?: string;\n- };\n- async function gh(args: string[]): Promise<string> {\n-   return ghAsync(args, {\n-     showSpinner: false,\n-     timeout: 30000\n-   });\n- }\n- export async function getLastFailedRunId(repo: string): Promise<number> {\n-   const out = (await gh([\n-     'run', 'list',\n-     '--repo', repo,\n-     '--status', 'failure',\n-     '--limit', '1',\n-     '--json', 'databaseId',\n-     '-q', '.[0].databaseId'\n-   ])).trim();\n-   const n = Number(out);\n-   if (!Number.isFinite(n)) {\n-     throw new Error(`Could not find failed run for ${repo}`);\n-   }\n-   return n;\n- }", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "ef7f174e"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "f982d301", "path": "mcp.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cmcp.ts", "mode": "summary", "lang": "markdown", "sha256": "24ca61ce6301f7a203ba6ed87975cb467f36ea3a8765e5bb10b72d1e05ddcd8d", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import fs from 'fs'; - import path from 'path'; - import os from...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "1d3c7a818c2d496cb9ad898a38cb455ba43b1c5e510a51b7d12f7ae50c3a42b8", "anchor_id": "5b4b5c9f", "atom_kind": "chunk", "path": "mcp.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cmcp.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cmcp.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 987], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import fs from 'fs'; - import path from 'path'; - import os from...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import fs from 'fs';\n- import path from 'path';\n- import os from 'os';\n- import chalk from 'chalk';\n- import { execSync } from 'child_process';\n- export interface MCPConfig {\n-   mcpServers: {\n-     github: {\n-       command: string;\n-       args: string[];\n-       env: {\n-         GITHUB_TOKEN: string;\n-       };\n-     };\n-   };\n- }\n- /**\n-  * Check if GitHub MCP server is configured\n-  */\n- export function isMCPConfigured(): boolean {\n-   const configPath = getMCPConfigPath();\n-   if (!fs.existsSync(configPath)) {\n-     return false;\n-   }\n-   try {\n-     const config = JSON.parse(fs.readFileSync(configPath, 'utf8'));\n-     return config.mcpServers?.github !== undefined;\n-   } catch {\n-     return false;\n-   }\n- }\n- /**\n-  * Get MCP config file path\n-  */\n- function getMCPConfigPath(): string {", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "f982d301"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "c27e9128", "path": "patch_options.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cpatch_options.ts", "mode": "summary", "lang": "markdown", "sha256": "cb5001ff6bf90fcdb188cf45f3b5c180a18073af8089a503119109ea018195d7", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "c524de30f2956c3768b1963362938fb2836c6e1ce58d08c8668b70ccd845331b", "anchor_id": "f85164be", "atom_kind": "chunk", "path": "patch_options.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cpatch_options.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cpatch_options.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1070], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import path from \"node:path\";\n- import chalk from \"chalk\";\n- import { copilotChatAsync } from \"./async-exec\";\n- import {\n-   ensureDir,\n-   loadText,\n-   writeJson,\n-   writeText,\n-   extractJsonObject,\n-   validateJson\n- } from \"./util\";\n- type StrategyId = \"conservative\" | \"balanced\" | \"aggressive\";\n- export type PatchStrategy = {\n-   label: string;\n-   id: StrategyId;\n-   risk_level: \"low\" | \"medium\" | \"high\";\n-   summary: string;\n-   diff: string;\n- };\n- export type PatchOptions = {\n-   strategies: PatchStrategy[];\n- };\n- export type QualityReview = {\n-   verdict: \"GO\" | \"NO_GO\";\n-   reasons: string[];\n-   risk_level: \"low\" | \"medium\" | \"high\";\n-   slop_score: number;\n-   suggested_adjustments: string[];\n- };\n- async function copilotChat(input: string, context: string): Promise<string> {\n-   return copilotChatAsync(input, {\n-     spinnerText: `[>] ${context}...`\n-   });\n- }", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "c27e9128"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "81145936", "path": "run.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Crun.ts", "mode": "summary", "lang": "markdown", "sha256": "7bb7a8e109f56f88f3b6347572cddd4fa21b2154d5e58b761bb01ae4fdfbb980", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "500bb73bff691dceb8693f00555662966461fa5486bf6b3b5bc07eb9840358a5", "anchor_id": "be85c33a", "atom_kind": "chunk", "path": "run.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Crun.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Crun.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 2, "span": [0, 1400], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Async-IO\" - import path from \"node:path\"; - import chalk from \"chalk\"; - imp...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Async-IO\"\n- import path from \"node:path\";\n- import chalk from \"chalk\";\n- import { analyzeRun } from \"./analyze\";\n- import { generatePatchOptions } from \"./patch_options\";\n- import { ensureDir, writeJson, writeText } from \"./util\";\n- export type RunFlags = {\n-   showReasoning?: boolean;\n-   showOptions?: boolean;\n-   strategy?: \"conservative\" | \"balanced\" | \"aggressive\";\n-   outDir?: string;\n- };\n- export async function runGuardian(repo: string, runId: number, flags: RunFlags) {\n-   const outDir = flags.outDir || path.join(process.cwd(), \".copilot-guardian\");\n-   ensureDir(outDir);\n-   console.log(chalk.bold.cyan('\\n=== Copilot Guardian Analysis ===\\n'));\n-   const { analysisPath, analysis, ctx } = await analyzeRun(repo, runId, outDir);\n-   // Default: generate options only if requested (for speed)\n-   let patchIndex: any | undefined;\n-   if (flags.showOptions) {\n-     const { index } = await generatePatchOptions(analysis, outDir);\n-     patchIndex = index;\n-   }\n-   // Save a small summary report\n-   const report = {\n-     timestamp: new Date().toISOString(),\n-     repo,\n-     runId,\n-     analysisPath,\n-     patchIndexPath: flags.showOptions ? path.join(outDir, \"patch_options.json\") : null,\n-     redacted: true\n", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "81145936"}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "428a695c5583af6d9ce6d93ba3c80abb16655f0b9b643ce627cb0c7c9587147b", "anchor_id": "579fccb5", "atom_kind": "chunk", "path": "run.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Crun.ts#c0002", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Crun.ts", "mode": "summary", "lang": "markdown", "chunk_index": 2, "chunk_total": 2, "span": [1269, 1472], "summary": "- analysisPath, - patchIndexPath: flags.showOptions ? path.join(outDir, \"patch_options.json\") : null, - redacted: true - }; - writeJson(path.join(outDir, \"guardian.report.json\"), report);", "content": "-     analysisPath,\n-     patchIndexPath: flags.showOptions ? path.join(outDir, \"patch_options.json\") : null,\n-     redacted: true\n-   };\n-   writeJson(path.join(outDir, \"guardian.report.json\"), report);", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "81145936"}}
{"type": "dir2md.file", "schema": "dir2md.rag.v1", "atom_kind": "file", "anchor_id": "8d9eb738", "path": "util.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cutil.ts", "mode": "summary", "lang": "markdown", "sha256": "84f024fd272f8a8281c9d3335159454d74c3e6c023e37787dd51b96a174046f3", "match_score": 0, "snippet": "", "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Standard Code\" - import fs from \"node:fs\"; - import path from \"node:path\"; -...", "nav": {"role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": false, "has_router": false}, "critical_flow": []}}
{"type": "dir2md.chunk", "schema": "dir2md.rag.v1", "id": "42f4242c464494671f081733c7285e245003f9e824f06823fccae45e11578c78", "anchor_id": "8e58a582", "atom_kind": "chunk", "path": "util.ts", "uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cutil.ts#c0001", "parent_uri": "local://dir2md/D%3A%5CSanctum%5CFlamehaven%5CSTRUCTURA%5CProject%5CGITHUB%20COPLIOT%20CLI%20CHALLENGE%5Ccopilot-guardian%5Csrc%5Cengine%5Cutil.ts", "mode": "summary", "lang": "markdown", "chunk_index": 1, "chunk_total": 1, "span": [0, 1283], "summary": "> **!! [LOGOS-AI-NOTE]** > * **Role:** `Kernel/Core` | **Criticality:** `Low` > * **Intent:** \"Component implementation for system logic.\" > * **Constraints:** \"Standard Code\" - import fs from \"node:fs\"; - import path from \"node:path\"; -...", "content": "\n> **!! [LOGOS-AI-NOTE]**\n> *   **Role:** `Kernel/Core` | **Criticality:** `Low`\n> *   **Intent:** \"Component implementation for system logic.\"\n> *   **Constraints:** \"Standard Code\"\n- import fs from \"node:fs\";\n- import path from \"node:path\";\n- import Ajv from \"ajv\";\n- import addFormats from \"ajv-formats\";\n- export type ExecOptions = {\n-   cwd?: string;\n-   input?: string;\n-   env?: NodeJS.ProcessEnv;\n-   stdio?: \"pipe\" | \"inherit\";\n- };\n- export function ensureDir(dir: string): void {\n-   if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });\n- }\n- export function loadText(p: string): string {\n-   return fs.readFileSync(p, \"utf8\");\n- }\n- export function writeText(p: string, content: string): void {\n-   ensureDir(path.dirname(p));\n-   fs.writeFileSync(p, content, \"utf8\");\n- }\n- export function writeJson(p: string, obj: unknown): void {\n-   writeText(p, JSON.stringify(obj, null, 2));\n- }\n- export function redactSecrets(text: string): string {\n-   const patterns: RegExp[] = [\n-     /ghp_[a-zA-Z0-9]{36}/g,\n-     /gho_[a-zA-Z0-9]{36}/g,\n-     /github_pat_[a-zA-Z0-9_]{82}/g,\n-     /ghs_[a-zA-Z0-9]{36}/g,\n-     /Bearer\\s+[A-Za-z0-9\\-._~+/]+=*/g,\n-     /sk-[a-zA-Z0-9]{48}/g,\n-     /(token|password|secret|key)\\s*[:=]\\s*[^\\s]+/gi,\n-     /\\b[A-Za-z0-9+/]{40,}\\b/g", "nav": {"role": "Kernel/Core", "entry_points": [], "critical_flow": [], "anchor_id": "8d9eb738"}}
{"type": "dir2md.pack", "schema": "dir2md.rag.v1", "pack": "nav", "version": "v1.1", "count": 10, "items": [{"path": "analyze.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "e0352f8d"}, {"path": "async-exec.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "c31e06e2"}, {"path": "auto-apply.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "7b473a41"}, {"path": "context-enhancer.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "2474278b"}, {"path": "debug.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "2cc66df5"}, {"path": "github.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "ef7f174e"}, {"path": "mcp.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "f982d301"}, {"path": "patch_options.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "c27e9128"}, {"path": "run.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": true, "has_router": false}, "critical_flow": [], "anchor_id": "81145936"}, {"path": "util.ts", "role": "Kernel/Core", "entry_points": [], "signals": {"has_main_guard": false, "has_main_func": false, "has_cli_framework": false, "has_web_app": false, "has_async": false, "has_router": false}, "critical_flow": [], "anchor_id": "8d9eb738"}]}